#!/bin/bash

echo "üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Git –∏ GitHub Push"
echo "=================================="

# –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
echo "üìù –í–≤–µ–¥–∏—Ç–µ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –¥–ª—è Git:"
read -p "–í–∞—à–µ –∏–º—è: " GIT_NAME
read -p "–í–∞—à email: " GIT_EMAIL

# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
echo "üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Git –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è..."
git config --global user.name "$GIT_NAME"
git config --global user.email "$GIT_EMAIL"

echo "‚úÖ Git –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω:"
echo "   –ò–º—è: $GIT_NAME"
echo "   Email: $GIT_EMAIL"
echo ""

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
echo "üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ Git..."
git status
echo ""

# –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ —Ñ–∞–π–ª—ã
echo "üìÅ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –≤ Git..."
git add .
echo "‚úÖ –§–∞–π–ª—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã"
echo ""

# –î–µ–ª–∞–µ–º –∫–æ–º–º–∏—Ç
echo "üíæ –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞..."
git commit -m "feat: –¥–æ–±–∞–≤–∏—Ç—å Supabase –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –∏ –æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç

- –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç –Ω–∞ Supabase –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –£–¥–∞–ª–∏—Ç—å SQLite –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ Prisma
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ Supabase
- –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ API —Ä–æ—É—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Supabase
- –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é"
echo "‚úÖ –ö–æ–º–º–∏—Ç —Å–æ–∑–¥–∞–Ω"
echo ""

# –ü—É—à–∏–º –Ω–∞ GitHub
echo "üöÄ –ü—É—à –Ω–∞ GitHub..."
echo "–ï—Å–ª–∏ —É –≤–∞—Å 2FA, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Personal Access Token –∫–∞–∫ –ø–∞—Ä–æ–ª—å"
echo ""

git push origin main

if [ $? -eq 0 ]; then
    echo ""
    echo "üéâ –£—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—à–µ–Ω–æ –Ω–∞ GitHub!"
    echo "üìÇ –ü—Ä–æ–µ–∫—Ç –¥–æ—Å—Ç—É–ø–µ–Ω: https://github.com/Bogatyrzzz/fl1test111"
else
    echo ""
    echo "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—É—à–µ. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:"
    echo "   1. –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –ª–æ–≥–∏–Ω–∞/–ø–∞—Ä–æ–ª—è –∏–ª–∏ —Ç–æ–∫–µ–Ω–∞"
    echo "   2. –î–æ—Å—Ç—É–ø –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é"
    echo "   3. –ò–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ"
fi